(()=>{"use strict";const e=document.getElementById("app");e?function n(){e&&chrome.storage.local.get("assessments",t=>{const s=t?.assessments||{},i=Object.keys(s);0!==i.length?function(t){if(!e)return;const s=(t.flags||[]).slice(0,5),i=(t.images||[]).slice(0,3);e.innerHTML=`\n    <main>\n      <h1>AI Car Deal Insight</h1>\n      <div style="margin-top:8px">\n        <div style="font-weight:700">Verdict: ${t.verdict??"N/A"}</div>\n        <div style="font-size:20px;font-weight:800;margin:6px 0">Score: ${Math.round(t.overallScore??0)}</div>\n        <div style="font-size:12px;opacity:0.9;white-space:pre-wrap">${(t.rationale||[]).slice(0,5).join("\n")}</div>\n      </div>\n      <div style="margin-top:8px">\n        ${s.map(e=>`<div style="font-size:12px;color:#b00">â€¢ ${e.summary??e.code}</div>`).join("")}\n      </div>\n      <div style="margin-top:8px;display:flex;gap:6px">\n        ${i.map(e=>`<img src="${e.url}" style="width:80px;height:60px;object-fit:cover;border-radius:4px"/>`).join("")}\n      </div>\n      <div style="margin-top:10px">\n        <button id="refresh-assessment" type="button">Refresh</button>\n      </div>\n    </main>\n  `,e.addEventListener("click",e=>{const t=e.target;t&&("refresh-assessment"===t.id||t.closest("#refresh-assessment"))&&(console.info("Popup: refresh button clicked"),e.preventDefault(),n())})}(s[i[i.length-1]]):e&&(e.innerHTML="\n    <main>\n      <h1>AI Car Deal Insight</h1>\n      <p>No assessments yet. Open an Autotrader listing to generate one.</p>\n    </main>\n  ")})}():console.warn("Popup: missing #app container")})();
//# sourceMappingURL=popup.js.map