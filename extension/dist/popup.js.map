{"version":3,"file":"popup.js","mappings":"mBACA,MAAMA,EAAYC,SAASC,eAAe,OAqDrCF,EAfL,SAASG,IACAH,GAELI,OAAOC,QAAQC,MAAMC,IAAI,cAAgBC,IACrC,MAAMC,EAAcD,GAAKC,aAAe,CAAC,EACnCC,EAAOC,OAAOD,KAAKD,GACL,IAAhBC,EAAKE,OAjCjB,SAA0BC,GACtB,IAAKb,EACD,OACJ,MAAMc,GAASD,EAAWC,OAAS,IAAIC,MAAM,EAAG,GAC1CC,GAAUH,EAAWG,QAAU,IAAID,MAAM,EAAG,GAClDf,EAAUiB,UAAY,uIAIsBJ,EAAWK,SAAW,wFACIC,KAAKC,MAAMP,EAAWQ,cAAgB,mFACxCR,EAAWS,WAAa,IAAIP,MAAM,EAAG,GAAGQ,KAAK,0EAG3GT,EAAMU,IAAKC,GAAM,4CAA4CA,EAAEC,SAAWD,EAAEE,cAAcJ,KAAK,uFAG/FP,EAAOQ,IAAKI,GAAQ,aAAaA,EAAIC,4EAA4EN,KAAK,kJAO5H,MAAMO,EAAa7B,SAASC,eAAe,sBAC3C4B,GAAYC,iBAAiB,QAAS5B,EAC1C,CAaQ6B,CADevB,EAAYC,EAAKA,EAAKE,OAAS,KA/C7CZ,IAELA,EAAUiB,UAAY,oJAgD1B,CAKId,GAHA8B,QAAQC,KAAK,gC","sources":["webpack://ai-car-shopping-extension/./src/presentation/popup/index.ts"],"sourcesContent":["\"use strict\";\nconst container = document.getElementById(\"app\");\nfunction renderEmpty() {\n    if (!container)\n        return;\n    container.innerHTML = `\n    <main>\n      <h1>AI Car Deal Insight</h1>\n      <p>No assessments yet. Open an Autotrader listing to generate one.</p>\n    </main>\n  `;\n}\nfunction renderAssessment(assessment) {\n    if (!container)\n        return;\n    const flags = (assessment.flags || []).slice(0, 5);\n    const images = (assessment.images || []).slice(0, 3);\n    container.innerHTML = `\n    <main>\n      <h1>AI Car Deal Insight</h1>\n      <div style=\"margin-top:8px\">\n        <div style=\"font-weight:700\">Verdict: ${assessment.verdict ?? 'N/A'}</div>\n        <div style=\"font-size:20px;font-weight:800;margin:6px 0\">Score: ${Math.round(assessment.overallScore ?? 0)}</div>\n        <div style=\"font-size:12px;opacity:0.9;white-space:pre-wrap\">${(assessment.rationale || []).slice(0, 5).join('\\n')}</div>\n      </div>\n      <div style=\"margin-top:8px\">\n        ${flags.map((f) => `<div style=\"font-size:12px;color:#b00\">• ${f.summary ?? f.code}</div>`).join('')}\n      </div>\n      <div style=\"margin-top:8px;display:flex;gap:6px\">\n        ${images.map((img) => `<img src=\"${img.url}\" style=\"width:80px;height:60px;object-fit:cover;border-radius:4px\"/>`).join('')}\n      </div>\n      <div style=\"margin-top:10px\">\n        <button id=\"refresh-assessment\">Refresh</button>\n      </div>\n    </main>\n  `;\n    const refreshBtn = document.getElementById('refresh-assessment');\n    refreshBtn?.addEventListener('click', loadLatestAssessment);\n}\nfunction loadLatestAssessment() {\n    if (!container)\n        return;\n    chrome.storage.local.get('assessments', (res) => {\n        const assessments = res?.assessments || {};\n        const keys = Object.keys(assessments);\n        if (keys.length === 0) {\n            renderEmpty();\n            return;\n        }\n        // pick most recent by saved order (no timestamp available) — take last key\n        const latest = assessments[keys[keys.length - 1]];\n        renderAssessment(latest);\n    });\n}\nif (!container) {\n    console.warn('Popup: missing #app container');\n}\nelse {\n    loadLatestAssessment();\n}\n"],"names":["container","document","getElementById","loadLatestAssessment","chrome","storage","local","get","res","assessments","keys","Object","length","assessment","flags","slice","images","innerHTML","verdict","Math","round","overallScore","rationale","join","map","f","summary","code","img","url","refreshBtn","addEventListener","renderAssessment","console","warn"],"sourceRoot":""}